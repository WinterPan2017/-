{"remainingRequest":"/home/winter/Projects/COVID-19-web/test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/winter/Projects/COVID-19-web/test/src/components/New.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/winter/Projects/COVID-19-web/test/src/components/New.vue","mtime":1617196586148},{"path":"/home/winter/Projects/COVID-19-web/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/winter/Projects/COVID-19-web/test/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/winter/Projects/COVID-19-web/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/winter/Projects/COVID-19-web/test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXF3ZXN0IGZyb20gInJlcXdlc3QiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXR1czogeyB1cGxvYWQ6ICJwcm9jZXNzIiwgYW5hbHlzaXM6ICJ3YWl0IiwgZG9uZTogIndhaXQiIH0sCiAgICAgIGljb246IHsgdXBsb2FkOiAibG9hZGluZyIsIGFuYWx5c2lzOiAibGluZS1jaGFydCIsIGRvbmU6ICJjaGVjayIgfSwKICAgICAgbmFtZTogIlRlc3QwMDEiLAogICAgICBkZXNjcmlwdGlvbjogIlRoaXMgaXMgdGhlIGZpcnN0IHBhdGllbnQiLAogICAgICBjYXRlZ29yeTogIlgtcmF5IiwKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICB1cGxvYWRpbmc6IGZhbHNlLAogICAgICAvL+W8ueeqlwogICAgICBNb2RhbFRleHQ6ICLliIbmnpDlrozmiJAsIOaYr+WQpuWJjeW+gOWIhuaekOiusOW9lemhtemdouafpeeciyIsCiAgICAgIHZpc2libGU6IGZhbHNlLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICAvLyDnsbvlnovpgInmi6kKICAgIG9uQ2hhbmdlKGUpIHsKICAgICAgY29uc29sZS5sb2coYGNoZWNrZWQgPSAke2UudGFyZ2V0LnZhbHVlfWApOwogICAgfSwKICAgIC8vIOaWh+S7tuS4iuS8oAogICAgaGFuZGxlUmVtb3ZlKGZpbGUpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbGVMaXN0LmluZGV4T2YoZmlsZSk7CiAgICAgIGNvbnN0IG5ld0ZpbGVMaXN0ID0gdGhpcy5maWxlTGlzdC5zbGljZSgpOwogICAgICBuZXdGaWxlTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLmZpbGVMaXN0ID0gbmV3RmlsZUxpc3Q7CiAgICAgIHRoaXMuc3RhdHVzLnVwbG9hZCA9ICJwcm9jZXNzIjsKICAgICAgdGhpcy5pY29uLnVwbG9hZCA9ICJsb2FkaW5nIjsKICAgIH0sCiAgICBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB0aGlzLmZpbGVMaXN0ID0gWy4uLnRoaXMuZmlsZUxpc3QsIGZpbGVdOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgaGFuZGxlVXBsb2FkKCkgewogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgdGhpcy5maWxlTGlzdC5mb3JFYWNoKChmaWxlKSA9PiB7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlc1tdIiwgZmlsZSk7CiAgICAgIH0pOwogICAgICBmb3JtRGF0YS5hcHBlbmQoIm5hbWUiLCB0aGlzLm5hbWUpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImRlc2NyaXB0aW9uIiwgdGhpcy5kZXNjcmlwdGlvbik7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiY2F0ZWdvcnkiLCB0aGlzLmNhdGVnb3J5KTsKICAgICAgdGhpcy51cGxvYWRpbmcgPSB0cnVlOwogICAgICBjb25zb2xlLmxvZygiaGFuZGxlVXBsb2FkIiwgZm9ybURhdGEuZ2V0KCJmaWxlc1tdIikpOwogICAgICAvLyBzdWNjZXNzCiAgICAgIC8vIHRoaXMuZmlsZUxpc3QgPSBbXTsKICAgICAgLy8gdGhpcy51cGxvYWRpbmcgPSBmYWxzZTsKICAgICAgLy8gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCJ1cGxvYWQgc3VjY2Vzc2Z1bGx5LiIpOwogICAgICAvLyB0aGlzLnN0YXR1cy51cGxvYWQgPSAiZmluaXNoIjsKICAgICAgLy8gdGhpcy5pY29uLnVwbG9hZCA9ICJjbG91ZC11cGxvYWQiOwogICAgICAvLyB0aGlzLnN0YXR1cy5hbmFseXNpcyA9ICJwcm9jZXNzIjsKICAgICAgLy8gdGhpcy5pY29uLmFuYWx5c2lzID0gImxvYWRpbmciOwoKICAgICAgLy8gc2V0VGltZW91dCgiIiwgMTAwMCk7CiAgICAgIC8vIHRoaXMuc3RhdHVzLmFuYWx5c2lzID0gImZpbmlzaCI7CiAgICAgIC8vIHRoaXMuaWNvbi5hbmFseXNpcyA9ICJsaW5lLWNoYXJ0IjsKICAgICAgLy8gdGhpcy5zdGF0dXMuZG9uZSA9ICJmaW5pc2giOwogICAgICAvLyB0aGlzLmljb24uZG9uZSA9ICJjaGVjayI7CiAgICAgIC8vIFlvdSBjYW4gdXNlIGFueSBBSkFYIGxpYnJhcnkgeW91IGxpa2UKICAgICAgcmVxd2VzdCh7CiAgICAgICAgdXJsOiAiaHR0cDovLzEyNy4wLjAuMTo1MDAwL3VwbG9hZCIsCiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgIGRhdGE6IGZvcm1EYXRhLAogICAgICAgIHN1Y2Nlc3M6ICgpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhKTsKICAgICAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXTsKICAgICAgICAgIHRoaXMudXBsb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoInVwbG9hZCBzdWNjZXNzZnVsbHkuIik7CiAgICAgICAgfSwKICAgICAgICBlcnJvcjogKCkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpOwogICAgICAgICAgdGhpcy51cGxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoInVwbG9hZCBmYWlsZWQuIik7CiAgICAgICAgfSwKICAgICAgfSk7CgogICAgICAvL+aIkOWKn+S5i+WQjui3s+i9rOWIsOivpuaDhemhtemdogogICAgICB0aGlzLnZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8v5by556qX5aSE55CGCiAgICBoYW5kbGVPayhlKSB7CiAgICAgIGNvbnNvbGUubG9nKCJoYW5kbGVPayIsIGUpOwogICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgcGF0aDogIi9ob21lL3JlY29yZCIsCiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUNhbmNlbChlKSB7CiAgICAgIGNvbnNvbGUubG9nKCJoYW5kbGVDYW5jZWwiLCBlKTsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["New.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"New.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div style=\"background-color: #ececec; padding: 20px\">\n    <a-row :gutter=\"16\">\n      <!-- 提示栏 -->\n      <a-col :span=\"6\">\n        <a-card style=\"width: 50%; float: left\" :bordered=\"false\">\n          <p>使用说明</p>\n          <a-timeline>\n            <a-timeline-item\n              >上传需要检测的影像文件(若包含完整的连续CT图像请压缩后上传)</a-timeline-item\n            >\n            <a-timeline-item>上传成功后,系统自动进行分析</a-timeline-item>\n            <a-timeline-item>显示分析结果及对应的可视化</a-timeline-item>\n          </a-timeline>\n        </a-card>\n      </a-col>\n      <!-- 状态显示和上传栏 -->\n      <a-col :span=\"12\">\n        <a-card\n          style=\"width: 100%; height: 100%; float: right\"\n          :bordered=\"false\"\n        >\n          <!-- 状态栏 -->\n          <a-steps>\n            <a-step :status=\"status.upload\" title=\"upload\">\n              <a-icon slot=\"icon\" :type=\"icon.upload\" />\n            </a-step>\n            <a-step :status=\"status.analysis\" title=\"analysis\">\n              <a-icon slot=\"icon\" :type=\"icon.analysis\" />\n            </a-step>\n            <a-step :status=\"status.done\" title=\"done\">\n              <a-icon slot=\"icon\" :type=\"icon.done\" />\n            </a-step>\n          </a-steps>\n          <a-divider></a-divider>\n          <a-form>\n            <a-form-item label=\"命名\">\n              <a-input :placeholder=\"name\" v-model=\"name\" />\n            </a-form-item>\n            <a-form-item label=\"描述\">\n              <a-input :placeholder=\"description\" v-model=\"description\" />\n            </a-form-item>\n            <a-form-item label=\"类别\">\n              <a-radio-group v-model=\"category\" @change=\"onChange\">\n                <a-radio-button value=\"X-ray\"> X-ray </a-radio-button>\n                <a-radio-button value=\"ct\"> CT </a-radio-button>\n              </a-radio-group>\n            </a-form-item>\n          </a-form>\n          <a-upload\n            :file-list=\"fileList\"\n            :remove=\"handleRemove\"\n            :before-upload=\"beforeUpload\"\n          >\n            <a-button> <a-icon type=\"upload\" /> Select File </a-button>\n          </a-upload>\n          <a-button\n            type=\"primary\"\n            :disabled=\"fileList.length === 0\"\n            :loading=\"uploading\"\n            style=\"margin-top: 16px; width: 100%\"\n            @click=\"handleUpload\"\n          >\n            {{ uploading ? \"Uploading\" : \"Start Upload\" }}\n          </a-button>\n        </a-card>\n      </a-col>\n    </a-row>\n    <a-modal\n      title=\"Title\"\n      :visible=\"visible\"\n      @ok=\"handleOk\"\n      @cancel=\"handleCancel\"\n    >\n      <p>{{ ModalText }}</p>\n    </a-modal>\n  </div>\n</template>\n<script>\nimport reqwest from \"reqwest\";\nexport default {\n  data() {\n    return {\n      status: { upload: \"process\", analysis: \"wait\", done: \"wait\" },\n      icon: { upload: \"loading\", analysis: \"line-chart\", done: \"check\" },\n      name: \"Test001\",\n      description: \"This is the first patient\",\n      category: \"X-ray\",\n      fileList: [],\n      uploading: false,\n      //弹窗\n      ModalText: \"分析完成, 是否前往分析记录页面查看\",\n      visible: false,\n    };\n  },\n  created() {},\n  methods: {\n    // 类型选择\n    onChange(e) {\n      console.log(`checked = ${e.target.value}`);\n    },\n    // 文件上传\n    handleRemove(file) {\n      const index = this.fileList.indexOf(file);\n      const newFileList = this.fileList.slice();\n      newFileList.splice(index, 1);\n      this.fileList = newFileList;\n      this.status.upload = \"process\";\n      this.icon.upload = \"loading\";\n    },\n    beforeUpload(file) {\n      this.fileList = [...this.fileList, file];\n      return false;\n    },\n    handleUpload() {\n      var formData = new FormData();\n      this.fileList.forEach((file) => {\n        formData.append(\"files[]\", file);\n      });\n      formData.append(\"name\", this.name);\n      formData.append(\"description\", this.description);\n      formData.append(\"category\", this.category);\n      this.uploading = true;\n      console.log(\"handleUpload\", formData.get(\"files[]\"));\n      // success\n      // this.fileList = [];\n      // this.uploading = false;\n      // this.$message.success(\"upload successfully.\");\n      // this.status.upload = \"finish\";\n      // this.icon.upload = \"cloud-upload\";\n      // this.status.analysis = \"process\";\n      // this.icon.analysis = \"loading\";\n\n      // setTimeout(\"\", 1000);\n      // this.status.analysis = \"finish\";\n      // this.icon.analysis = \"line-chart\";\n      // this.status.done = \"finish\";\n      // this.icon.done = \"check\";\n      // You can use any AJAX library you like\n      reqwest({\n        url: \"http://127.0.0.1:5000/upload\",\n        method: \"post\",\n        processData: false,\n        data: formData,\n        success: () => {\n          console.log(formData);\n          this.fileList = [];\n          this.uploading = false;\n          this.$message.success(\"upload successfully.\");\n        },\n        error: () => {\n          console.log(formData);\n          this.uploading = false;\n          this.$message.error(\"upload failed.\");\n        },\n      });\n\n      //成功之后跳转到详情页面\n      this.visible = true;\n    },\n    //弹窗处理\n    handleOk(e) {\n      console.log(\"handleOk\", e);\n      this.$router.replace({\n        path: \"/home/record\",\n      });\n    },\n    handleCancel(e) {\n      console.log(\"handleCancel\", e);\n      this.visible = false;\n    },\n  },\n};\n</script>\n"]}]}
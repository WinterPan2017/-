{"remainingRequest":"/home/winter/Projects/COVID-19-web/test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/winter/Projects/COVID-19-web/test/src/components/Record.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/winter/Projects/COVID-19-web/test/src/components/Record.vue","mtime":1617266115182},{"path":"/home/winter/Projects/COVID-19-web/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/winter/Projects/COVID-19-web/test/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/winter/Projects/COVID-19-web/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/winter/Projects/COVID-19-web/test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGNvbHVtbnMgPSBbCiAgewogICAgZGF0YUluZGV4OiAibmFtZSIsCiAgICBrZXk6ICJuYW1lIiwKICAgIHNsb3RzOiB7IHRpdGxlOiAiY3VzdG9tVGl0bGUiIH0sCiAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJuYW1lIiB9LAogIH0sCiAgewogICAgdGl0bGU6ICLml7bpl7QiLAogICAgZGF0YUluZGV4OiAidGltZSIsCiAgICBrZXk6ICJ0aW1lIiwKICB9LAogIHsKICAgIHRpdGxlOiAi5pWw6YePIiwKICAgIGRhdGFJbmRleDogIm51bSIsCiAgICBrZXk6ICJudW0iLAogIH0sCiAgewogICAgdGl0bGU6ICLnsbvlnosiLAogICAgZGF0YUluZGV4OiAiY2F0ZWdvcnkiLAogICAga2V5OiAiY2F0ZWdvcnkiLAogICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiY2F0ZWdvcnkiIH0sCiAgfSwKICB7CiAgICB0aXRsZTogIuiviuaWrSIsCiAgICBrZXk6ICJkaWFnbm9zaXMiLAogICAgZGF0YUluZGV4OiAiZGlhZ25vc2lzIiwKICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImRpYWdub3NpcyIgfSwKICB9LAogIHsKICAgIHRpdGxlOiAi5pON5L2cIiwKICAgIGtleTogImFjdGlvbiIsCiAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJhY3Rpb24iIH0sCiAgfSwKXTsKCmNvbnN0IGRhdGEgPSBbXTsKaW1wb3J0IHJlcXdlc3QgZnJvbSAicmVxd2VzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YSwKICAgICAgY29sdW1ucywKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgcmVxd2VzdCh7CiAgICAgIHVybDogImh0dHA6Ly8xMjcuMC4wLjE6NTAwMC9nZXRSZWNvcmQiLAogICAgICBtZXRob2Q6ICJnZXQiLAogICAgICBkYXRhOiB7IHVzZXJpZDogIjEiIH0sCiAgICAgIHN1Y2Nlc3M6IChlKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coInN1Y2VzcyIsIGUpOwogICAgICAgIHRoaXMuZGF0YSA9IGU7CiAgICAgIH0sCiAgICAgIGVycm9yOiAoKSA9PiB7fSwKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgc2hvd0RldGFpbChyZWNvcmQpIHsKICAgICAgY29uc29sZS5sb2cocmVjb3JkKTsKICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgIG5hbWU6ICJEZXRhaWwiLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgZHJlY29yZDogcmVjb3JkLmtleSwKICAgICAgICB9LAogICAgICB9KTsKICAgIH0sCiAgICBjb25maXJtRGVsZXRlKGUpIHsKICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIC8vIOaPkOS6pOacjeWKoeWZqAoKICAgICAgLy8g5pu05paw5pys5ZywCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuZGF0YVtpXS5rZXkgPT0gZS5rZXkpIHRoaXMuZGF0YS5zcGxpY2UoaSwgMSk7CiAgICAgIH0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKICAgIH0sCiAgICAvLyDlsIbnm5HlkKzmk43kvZzlhpnlnKhtZXRob2Rz6YeM6Z2i77yMcmVtb3ZlRXZlbnRMaXN0ZW5lcuWPlua2iOebkeWQrOWGheWuueW/hemhu+i3n+W8gOWQr+ebkeWQrOS/neaMgeS4gOiHtAogICAgYmFja0NoYW5nZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2hhbmdlIiwgZmFsc2UpOwogICAgfSwKICB9LAogIC8vIOaMgui9veWujOaIkOWQju+8jOWIpOaWrea1j+iniOWZqOaYr+WQpuaUr+aMgXBvcHN0YXRlCiAgbW91bnRlZCgpIHsKICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUpIHsKICAgICAgLy8g5b6A5Y6G5Y+y6K6w5b2V6YeM6Z2i5re75Yqg5LiA5p2h5paw55qE5b2T5YmN6aG16Z2i55qEdXJsCiAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIGRvY3VtZW50LlVSTCk7CiAgICAgIC8vIOe7mSBwb3BzdGF0ZSDnu5HlrprkuIDkuKrmlrnms5Ug55uR5ZCs6aG16Z2i5Yi35pawCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJwb3BzdGF0ZSIsIHRoaXMuYmFja0NoYW5nZSwgZmFsc2UpOwogICAgfQogIH0sCgogIC8vIOmhtemdoumUgOavgeaXtu+8jOWPlua2iOebkeWQrOOAguWQpuWImeWFtuS7lnZ1Zei3r+eUsemhtemdouS5n+S8muiiq+ebkeWQrAogIGRlc3Ryb3llZCgpIHsKICAgIC8vIHdpbmRvdy5yZW1vdmVMaXN0ZW5lcigicG9wc3RhdGUiLCB0aGlzLmJhY2tDaGFuZ2UsIGZhbHNlKTsKICB9LAp9Owo="},{"version":3,"sources":["Record.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Record.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <a-table :columns=\"columns\" :data-source=\"data\">\n    <a slot=\"name\" slot-scope=\"text\">{{ text }}</a>\n    <span slot=\"customTitle\"><a-icon type=\"smile-o\" /> 名称</span>\n    <span slot=\"category\" slot-scope=\"category\">\n      <a-tag\n        :key=\"category\"\n        :color=\"category === 'X-ray' ? 'CornflowerBlue' : 'BurlyWood '\"\n      >\n        {{ category.toUpperCase() }}\n      </a-tag>\n    </span>\n    <span slot=\"diagnosis\" slot-scope=\"diagnosis\">\n      <a-tag\n        :key=\"diagnosis\"\n        :color=\"\n          diagnosis === 'COVID-19'\n            ? 'red'\n            : diagnosis === 'CAP'\n            ? 'yellow'\n            : 'green'\n        \"\n      >\n        {{ diagnosis.toUpperCase() }}\n      </a-tag>\n    </span>\n    <span slot=\"action\" slot-scope=\"record\">\n      <a-divider type=\"vertical\" />\n      <a-popconfirm\n        title=\"Are you sure delete this task?\"\n        ok-text=\"Yes\"\n        cancel-text=\"No\"\n        @confirm=\"confirmDelete(record)\"\n      >\n        <a class=\"ant-dropdown-lin\">删除</a>\n      </a-popconfirm>\n\n      <a-divider type=\"vertical\" />\n      <a class=\"ant-dropdown-link\"> 下载 </a>\n      <a-divider type=\"vertical\" />\n      <a class=\"ant-dropdown-link\" @click=\"showDetail(record)\"> 详情 </a>\n    </span>\n  </a-table>\n</template>\n<script>\nconst columns = [\n  {\n    dataIndex: \"name\",\n    key: \"name\",\n    slots: { title: \"customTitle\" },\n    scopedSlots: { customRender: \"name\" },\n  },\n  {\n    title: \"时间\",\n    dataIndex: \"time\",\n    key: \"time\",\n  },\n  {\n    title: \"数量\",\n    dataIndex: \"num\",\n    key: \"num\",\n  },\n  {\n    title: \"类型\",\n    dataIndex: \"category\",\n    key: \"category\",\n    scopedSlots: { customRender: \"category\" },\n  },\n  {\n    title: \"诊断\",\n    key: \"diagnosis\",\n    dataIndex: \"diagnosis\",\n    scopedSlots: { customRender: \"diagnosis\" },\n  },\n  {\n    title: \"操作\",\n    key: \"action\",\n    scopedSlots: { customRender: \"action\" },\n  },\n];\n\nconst data = [];\nimport reqwest from \"reqwest\";\nexport default {\n  data() {\n    return {\n      data,\n      columns,\n    };\n  },\n  created() {\n    reqwest({\n      url: \"http://127.0.0.1:5000/getRecord\",\n      method: \"get\",\n      data: { userid: \"1\" },\n      success: (e) => {\n        console.log(\"sucess\", e);\n        this.data = e;\n      },\n      error: () => {},\n    });\n  },\n  methods: {\n    showDetail(record) {\n      console.log(record);\n      this.$router.replace({\n        name: \"Detail\",\n        params: {\n          drecord: record.key,\n        },\n      });\n    },\n    confirmDelete(e) {\n      console.log(e);\n      // 提交服务器\n\n      // 更新本地\n      for (let i = 0; i < this.data.length; i++) {\n        if (this.data[i].key == e.key) this.data.splice(i, 1);\n      }\n      this.$message.success(\"删除成功\");\n    },\n    // 将监听操作写在methods里面，removeEventListener取消监听内容必须跟开启监听保持一致\n    backChange() {\n      this.$emit(\"change\", false);\n    },\n  },\n  // 挂载完成后，判断浏览器是否支持popstate\n  mounted() {\n    if (window.history && window.history.pushState) {\n      // 往历史记录里面添加一条新的当前页面的url\n      history.pushState(null, null, document.URL);\n      // 给 popstate 绑定一个方法 监听页面刷新\n      window.addEventListener(\"popstate\", this.backChange, false);\n    }\n  },\n\n  // 页面销毁时，取消监听。否则其他vue路由页面也会被监听\n  destroyed() {\n    // window.removeListener(\"popstate\", this.backChange, false);\n  },\n};\n</script>\n"]}]}
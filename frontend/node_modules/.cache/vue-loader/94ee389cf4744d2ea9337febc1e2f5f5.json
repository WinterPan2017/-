{"remainingRequest":"/home/winter/Projects/Medical_Image_Detection_System_For_COVID19/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/winter/Projects/Medical_Image_Detection_System_For_COVID19/frontend/src/views/Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/winter/Projects/Medical_Image_Detection_System_For_COVID19/frontend/src/views/Detail.vue","mtime":1618558547771},{"path":"/home/winter/Projects/Medical_Image_Detection_System_For_COVID19/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/winter/Projects/Medical_Image_Detection_System_For_COVID19/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/winter/Projects/Medical_Image_Detection_System_For_COVID19/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/winter/Projects/Medical_Image_Detection_System_For_COVID19/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGNvbHVtbnMgPSBbCiAgewogICAgdGl0bGU6ICLmlofku7blkI0iLAogICAgZGF0YUluZGV4OiAiZmlsZW5hbWUiLAogICAga2V5OiAiZmlsZW5hbWUiLAogIH0sCgogIHsKICAgIHRpdGxlOiAi57G75Z6LIiwKICAgIGRhdGFJbmRleDogImNhdGVnb3J5IiwKICAgIGtleTogImNhdGVnb3J5IiwKICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImNhdGVnb3J5IiB9LAogIH0sCiAgewogICAgdGl0bGU6ICLor4rmlq0iLAogICAga2V5OiAiZGlhZ25vc2lzIiwKICAgIGRhdGFJbmRleDogImRpYWdub3NpcyIsCiAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJkaWFnbm9zaXMiIH0sCiAgfSwKICB7CiAgICB0aXRsZTogIuaTjeS9nCIsCiAgICBrZXk6ICJhY3Rpb24iLAogICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiYWN0aW9uIiB9LAogIH0sCl07CmltcG9ydCByZXF3ZXN0IGZyb20gInJlcXdlc3QiOwppbXBvcnQgeyBnZXRDb29raWUgfSBmcm9tICIuLi91dGlscy9jb29raWUuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRyZWNvcmQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5kcmVjb3JkLAogICAgICByYXdJbWFnZU9uU2hvdzogIi4uL2Fzc2V0cy9DVC5wbmciLAogICAgICBhbm5vdGF0aW9uSW1hZ2VPblNob3c6ICIuLi9hc3NldHMvQ1QucG5nIiwKICAgICAgaW5mbzogewogICAgICAgIG5hbWU6ICJuYW1lIiwKICAgICAgICBkZXNjcmlwdGlvbjogImRlc2NyaXB0aW9uIiwKICAgICAgICB0aW1lOiAidGltZSIsCiAgICAgICAgbnVtOiAxLAogICAgICAgIGRpYWdub3NpczogIkNPVklELTE5IiwKICAgICAgfSwKICAgICAgZGF0YTogWwogICAgICAgIHsKICAgICAgICAgIGNhdGVnb3J5OiAiQ1QiLAogICAgICAgICAgZGVzY3JpcHRpb246ICJ0aGlzIGlzIGEgdGVzdCBmb3IgTm9ybWFsIiwKICAgICAgICAgIGRpYWdub3NpczogIk5vcm1hbCIsCiAgICAgICAgICBrZXk6IDEsCiAgICAgICAgICBuYW1lOiAiY3QgdGVzdDEiLAogICAgICAgICAgbnVtOiAxLAogICAgICAgICAgdGltZTogIjIwMjEtMDQtMTUgMTI6NDU6NDAiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGNvbHVtbnMsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOajgOafpeaYr+WQpueZu+W9lQogICAgbGV0IF90b2tlbiA9IGdldENvb2tpZSgidG9rZW4iKTsKICAgIGlmIChfdG9rZW4gPT09IHVuZGVmaW5lZCB8fCBfdG9rZW4gPT0gIiIpIHsKICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoIi9Mb2dpbiIpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5kcmVjb3JkID0gdGhpcy4kcm91dGUucGFyYW1zLmRyZWNvcmQ7CiAgICAgIC8vIOajgOafpeaYr+WQpuiOt+WPluWIsGRyZWNvcmRpZAogICAgICBpZiAodGhpcy5kcmVjb3JkID09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvSG9tZS9SZWNvcmQiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDor7fmsYLmlofku7bliJfooagKICAgICAgICByZXF3ZXN0KHsKICAgICAgICAgIHVybDogImh0dHA6Ly8xMjcuMC4wLjE6NTAwMC9nZXRSZWNvcmREZXRhaWwiLAogICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgdG9rZW46IGdldENvb2tpZSgidG9rZW4iKSwKICAgICAgICAgIH0sCiAgICAgICAgICBkYXRhOiB7IGRyZWNvcmQ6IHRoaXMuZHJlY29yZCB9LAogICAgICAgICAgc3VjY2VzczogKGUpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coInN1Y2VzcyIsIGUpOwogICAgICAgICAgICB0aGlzLmRhdGEgPSBlLmFyZWNvcmRzOwogICAgICAgICAgICB0aGlzLmluZm8gPSBlLmluZm87CiAgICAgICAgICB9LAogICAgICAgICAgZXJyb3I6ICgpID0+IHt9LAogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDliIfmjaLmmL7npLrlm77lg48KICAgIHNob3dJbWFnZXMocmVjb3JkKSB7CiAgICAgIHJlcXdlc3QoewogICAgICAgIHVybDogImh0dHA6Ly8xMjcuMC4wLjE6NTAwMC9nZXRJbWFnZSIsCiAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICByZXNwb25zZVR5cGU6ICJhcnJheWJ1ZmZlciIsCiAgICAgICAgZGF0YTogeyBhcmVjb3JkaWQ6IHJlY29yZC5hcmVjb3JkaWQsIGlzcmF3OiB0cnVlIH0sCiAgICAgICAgc3VjY2VzczogKGUpID0+IHsKICAgICAgICAgIHRoaXMucmF3SW1hZ2VPblNob3cgPSAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LCIgKyBlLnJlc3BvbnNlOwogICAgICAgIH0sCiAgICAgICAgZXJyb3I6ICgpID0+IHt9LAogICAgICB9KTsKICAgICAgcmVxd2VzdCh7CiAgICAgICAgdXJsOiAiaHR0cDovLzEyNy4wLjAuMTo1MDAwL2dldEltYWdlIiwKICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgIHJlc3BvbnNlVHlwZTogImFycmF5YnVmZmVyIiwKICAgICAgICBkYXRhOiB7IGFyZWNvcmRpZDogcmVjb3JkLmFyZWNvcmRpZCwgaXNyYXc6IGZhbHNlIH0sCiAgICAgICAgc3VjY2VzczogKGUpID0+IHsKICAgICAgICAgIHRoaXMuYW5ub3RhdGlvbkltYWdlT25TaG93ID0gImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwiICsgZS5yZXNwb25zZTsKICAgICAgICB9LAogICAgICAgIGVycm9yOiAoKSA9PiB7fSwKICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div style=\"background-color: #ececec; padding: 20px; height: 100%\">\n    <a-row :gutter=\"16\">\n      <a-card style=\"width: 100%; height: 100%; float: right\" :bordered=\"true\">\n        <a-descriptions title=\"检测记录\" layout=\"horizontal\">\n          <a-descriptions-item label=\"命名\">\n            {{ info.name }}\n          </a-descriptions-item>\n          <a-descriptions-item label=\"创建时间\">\n            {{ info.time }}\n          </a-descriptions-item>\n          <a-descriptions-item label=\"影像数量\">\n            {{ info.num }}\n          </a-descriptions-item>\n          <a-descriptions-item label=\"描述\">\n            {{ info.description }}\n          </a-descriptions-item>\n          <a-descriptions-item label=\"类型\">\n            <a-tag\n              :key=\"info.category\"\n              :color=\"info.category === 'CXR' ? 'CornflowerBlue' : 'BurlyWood '\"\n            >\n              {{ info.category }}\n            </a-tag>\n          </a-descriptions-item>\n          <a-descriptions-item label=\"诊断\">\n            <a-tag\n              style=\"margin-left: 10px\"\n              :color=\"\n                info.diagnosis === 'COVID-19'\n                  ? 'red'\n                  : info.diagnosis === 'CAP'\n                  ? 'yellow'\n                  : 'green '\n              \"\n            >\n              {{ info.diagnosis }}\n            </a-tag>\n          </a-descriptions-item>\n        </a-descriptions>\n        <a-divider type=\"horizontal\" />\n\n        <a-descriptions title=\"分析详情\" />\n        <a-table :columns=\"columns\" :data-source=\"data\">\n          <span slot=\"category\" slot-scope=\"category\">\n            <a-tag\n              :key=\"category\"\n              :color=\"category === 'CXR' ? 'CornflowerBlue' : 'BurlyWood '\"\n            >\n              {{ category.toUpperCase() }}\n            </a-tag>\n          </span>\n          <span slot=\"diagnosis\" slot-scope=\"diagnosis\">\n            <a-tag\n              :key=\"diagnosis\"\n              :color=\"\n                diagnosis === 'COVID-19'\n                  ? 'red'\n                  : diagnosis === 'CAP'\n                  ? 'yellow'\n                  : 'green'\n              \"\n            >\n              {{ diagnosis.toUpperCase() }}\n            </a-tag>\n          </span>\n          <span slot=\"action\" slot-scope=\"record\">\n            <a-button\n              type=\"primary\"\n              icon=\"file-image\"\n              size=\"large\"\n              @click=\"showImages(record)\"\n            >\n              显示\n            </a-button>\n          </span>\n        </a-table>\n        <a-row :gutter=\"16\">\n          <!-- 原始图片 -->\n          <a-col :span=\"8\">\n            <a-card hoverable style=\"width: 90%; margin: auto\" title=\"原始图像\">\n              <img\n                slot=\"cover\"\n                alt=\"选取对应文件即可显示\"\n                :src=\"rawImageOnShow\"\n              />\n            </a-card>\n          </a-col>\n          <!-- 分割可视化图片 -->\n          <a-col :span=\"8\">\n            <a-card\n              hoverable\n              style=\"width: 90%; margin: auto\"\n              title=\"疑似感染区域标注\"\n            >\n              <img\n                slot=\"cover\"\n                alt=\"选取对应文件即可显示\"\n                :src=\"annotationImageOnShow\"\n              />\n            </a-card>\n          </a-col>\n          <!-- 分析 -->\n          <a-col :span=\"8\">\n            <a-card hoverable style=\"width: 90%; margin: auto\" title=\"分析\">\n            </a-card>\n          </a-col>\n        </a-row>\n      </a-card>\n    </a-row>\n  </div>\n</template>\n<script>\nconst columns = [\n  {\n    title: \"文件名\",\n    dataIndex: \"filename\",\n    key: \"filename\",\n  },\n\n  {\n    title: \"类型\",\n    dataIndex: \"category\",\n    key: \"category\",\n    scopedSlots: { customRender: \"category\" },\n  },\n  {\n    title: \"诊断\",\n    key: \"diagnosis\",\n    dataIndex: \"diagnosis\",\n    scopedSlots: { customRender: \"diagnosis\" },\n  },\n  {\n    title: \"操作\",\n    key: \"action\",\n    scopedSlots: { customRender: \"action\" },\n  },\n];\nimport reqwest from \"reqwest\";\nimport { getCookie } from \"../utils/cookie.js\";\nexport default {\n  data() {\n    return {\n      drecord: this.$route.params.drecord,\n      rawImageOnShow: \"../assets/CT.png\",\n      annotationImageOnShow: \"../assets/CT.png\",\n      info: {\n        name: \"name\",\n        description: \"description\",\n        time: \"time\",\n        num: 1,\n        diagnosis: \"COVID-19\",\n      },\n      data: [\n        {\n          category: \"CT\",\n          description: \"this is a test for Normal\",\n          diagnosis: \"Normal\",\n          key: 1,\n          name: \"ct test1\",\n          num: 1,\n          time: \"2021-04-15 12:45:40\",\n        },\n      ],\n      columns,\n    };\n  },\n  created() {\n    // 检查是否登录\n    let _token = getCookie(\"token\");\n    if (_token === undefined || _token == \"\") {\n      this.$router.replace(\"/Login\");\n    } else {\n      this.drecord = this.$route.params.drecord;\n      // 检查是否获取到drecordid\n      if (this.drecord == undefined) {\n        this.$router.replace(\"/Home/Record\");\n      } else {\n        // 请求文件列表\n        reqwest({\n          url: \"http://127.0.0.1:5000/getRecordDetail\",\n          method: \"get\",\n          headers: {\n            token: getCookie(\"token\"),\n          },\n          data: { drecord: this.drecord },\n          success: (e) => {\n            console.log(\"sucess\", e);\n            this.data = e.arecords;\n            this.info = e.info;\n          },\n          error: () => {},\n        });\n      }\n    }\n  },\n  methods: {\n    // 切换显示图像\n    showImages(record) {\n      reqwest({\n        url: \"http://127.0.0.1:5000/getImage\",\n        method: \"get\",\n        responseType: \"arraybuffer\",\n        data: { arecordid: record.arecordid, israw: true },\n        success: (e) => {\n          this.rawImageOnShow = \"data:image/png;base64,\" + e.response;\n        },\n        error: () => {},\n      });\n      reqwest({\n        url: \"http://127.0.0.1:5000/getImage\",\n        method: \"get\",\n        responseType: \"arraybuffer\",\n        data: { arecordid: record.arecordid, israw: false },\n        success: (e) => {\n          this.annotationImageOnShow = \"data:image/png;base64,\" + e.response;\n        },\n        error: () => {},\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.space-align-container {\n  display: flex;\n  /* align-item: flex-start; */\n  flex-wrap: wrap;\n  /* width: 100%;\n  height: 100%; */\n}\n.space-align-block {\n  margin: 8px 4px;\n  border: 1px solid #40a9ff;\n  padding: 4px;\n  flex: none;\n  width: 100%;\n  height: 100%;\n}\n.space-align-block .mock-block {\n  display: inline-block;\n  padding: 32px 8px 16px;\n  background: rgba(150, 150, 150, 0.2);\n}\n</style>"]}]}